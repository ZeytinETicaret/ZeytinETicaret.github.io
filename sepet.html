<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Sepet</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#f5f5f5;
}

.container{
    width:80%;
    margin:40px auto;
    background:#fff;
    padding:20px;
    border-radius:10px;
}

table{
    width:100%;
    border-collapse:collapse;
}

th,td{
    padding:10px;
    border-bottom:1px solid #ddd;
    text-align:center;
}

th{
    background:#222;
    color:#fff;
}

input{
    width:60px;
    text-align:center;
}

.sil{
    background:#e63946;
    color:#fff;
    border:none;
    padding:6px 10px;
    border-radius:4px;
    cursor:pointer;
}

.ode{
    margin-top:20px;
    padding:12px 20px;
    background:#2a9d8f;
    color:#fff;
    border:none;
    border-radius:6px;
    cursor:pointer;
}
</style>
</head>

<body>

<div class="container">
<h2 style="text-align:center;">Sepet</h2>

<table>
<thead>
<tr>
<th>Ürün</th>
<th>Fiyat</th>
<th>Adet</th>
<th>Toplam</th>
<th>Sil</th>
</tr>
</thead>

<tbody id="sepetBody">
<!-- BURASI BOŞ → JS dolduracak -->
</tbody>
</table>

<h3 id="genelToplam" style="text-align:right;">Toplam: 0 ₺</h3>

<button class="ode" onclick="odeme()">Ödemeye Geç</button>
</div>

<script>
let sepet = JSON.parse(localStorage.getItem("sepet")) || [];
let body = document.getElementById("sepetBody");

function goster(){
    body.innerHTML="";
    let toplam=0;

    sepet.forEach((u,i)=>{
        let araToplam = u.fiyat * u.adet;
        toplam += araToplam;

        body.innerHTML += `
        <tr>
            <td>${u.ad}</td>
            <td>${u.fiyat} ₺</td>
            <td>
                <input type="number" min="1" value="${u.adet}"
                onchange="adetDegistir(${i},this.value)">
            </td>
            <td>${araToplam.toFixed(2)} ₺</td>
            <td><button class="sil" onclick="sil(${i})">Sil</button></td>
        </tr>`;
    });

    document.getElementById("genelToplam").innerText =
    "Toplam: " + toplam.toFixed(2) + " ₺";

    localStorage.setItem("sepet", JSON.stringify(sepet));
}

function adetDegistir(i,adet){
    sepet[i].adet = Number(adet);
    goster();
}

function sil(i){
    sepet.splice(i,1);
    goster();
}

function odeme(){
    if(sepet.length === 0){
        alert("Sepet boş!");
        return;
    }
    window.location.href = "odeme.html";
}

goster();
</script>

</body>
</html>
